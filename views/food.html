<div class="header-food py-4">
    <h1>Recipes</h1>
</div>

<div class="container mt-4">
    <!-- Search, Category, Sort -->
    <div class="row mb-4">
        <div class="col-md-4">
            <input type="text" class="form-control" placeholder="Search by Title" ng-model="searchQuery" ng-change="searchRecipes()">
        </div>
        <div class="col-md-4">
            <select class="form-control" ng-model="selectedCategory" ng-change="searchRecipes()">
                <option value="">All Categories</option>
                <option value="Carb Conscious">Carb Conscious</option>
                <option value="Protein Packed">Protein Packed</option>
                <option value="Veggie Focused">Veggie Focused</option>
            </select>
        </div>
        <div class="col-md-4">
            <select class="form-control" ng-model="sortBy" ng-change="searchRecipes()">
                <option value="">Sort By</option>
                <option value="newest">Newest</option>
                <option value="oldest">Oldest</option>
            </select>
        </div>
    </div>

    <!-- Display Recipes as Cards -->
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-4" ng-repeat="recipe in recipes">
                <article>
                    <div class="card border-0">
                        <!-- Image Section -->
                        <figure class="card-img-top m-0 overflow-hidden">
                            <a ng-href="#/food/{{ recipe._id }}">
                                <img ng-src="{{ recipe.image }}" alt="{{ recipe.title }}" class="img-fluid mb-3 fixed-image" ng-if="recipe.image">

                                <div ng-if="!.image" style="height: 100%; background-color: #e0e0e0;"></div>
                            </a>
                        </figure>

                        <!-- Card Body -->
                        <div class="card-body bg-white p-4">
                            <!-- Recipe Header with Category -->
                            <div class="entry-header mb-3">
                                <ul class="entry-meta list-unstyled d-flex mb-2">
                                    <li>
                                        <a class="link-primary text-decoration-none">{{ recipe.category }}</a>
                                        
                                    </li>
                                </ul>
                                <h2 class="card-title entry-title h4 mb-0">
                                    <a class="link-dark text-decoration-none" ng-href="#/food/{{ recipe._id }}">{{ recipe.title }}</a>
                                </h2>
                            </div>
                            <!-- Recipe Content Preview -->
                            <p class="card-text entry-summary text-secondary mb-3">
                                {{ recipe.content | limitTo: 100 }}{{ recipe.content.length > 100 ? '...' : '' }}
                            </p>
                            <a ng-href="#/food/{{ recipe._id }}" class="btn btn-primary">Read More</a>
                        </div>

                        <!-- Footer with Date -->
                        <div class="card-footer border border-top-0 bg-light p-4">
                            <ul class="entry-meta list-unstyled d-flex align-items-center m-0">
                                <li>
                                    <a class="fs-7 link-secondary text-decoration-none d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
                                            <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z" />
                                            <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                                        </svg>
                                        <span class="ms-2 fs-7">{{ recipe.updatedAt | date:'d MMMM y' }}</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </div>
</div>
